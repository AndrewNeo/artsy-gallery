{% extends "_layout.html" %}
{% macro linkbox(linkobj) %}
    <ul>
    {% if linkobj.fa %}<li><a href="https://www.furaffinity.net/view/{{ linkobj.fa }}/">FurAffinity</a></li>{% endif %}
    {% if linkobj.weasyl %}<li><a href="{{ linkobj.weasyl }}">Weasyl</a></li>{% endif %}
    </ul>
{% endmacro %}
{% block title %}{{image.title}} by {{artist.name}}{% endblock %}
{% block content %}
    <h1>{{image.title}} by {{artist.name}}</h1>

    <div class="row">
        <div class="col-sm-12 col-md-7 col-lg-6">
            <p><a href="{{thumbnails.full}}"><img src="{{thumbnails.512}}" /></a></p>
            {% if image.description %}<p>{{image.description}}</p>{% endif %}
        </div>
        <div class="col-sm-12 col-md-5 col-lg-6">
            <h4>Characters</h4>
            <ul>
                {% for char_id in image.characters %}
                {% set char_data = get_character_breakdown(char_id) %}
                {% set character = char_data.character.get_parent() %}
                {% if not char_data.character.is_subform() %}
                <li><a href="../_characters/{{char_data.name}}.html#{{char_data.species_name}}">{{character.name}}</a> ({{char_data.species_details}})</li>
                {% else %}
                {% set character = character.get_parent() %}
                <li><a href="../_characters/{{char_data.name}}.html#{{char_data.species_name}}_{{char_data.subform_name}}">{{character.name}}</a> ({{char_data.subform_name}} {{char_data.species_details}})</li>
                {% endif %}
                {% endfor %}
            </ul>

            <h4>Tags</h4>
            <ul>
                {% for tag in image.tags %}
                <li><a href="../_tags/{{tag}}.html">{{tag}}</a></li>
                {% endfor %}
            </ul>

            {% if image.artist_links %}
                <h4>Artist's links</h4>
                {{ linkbox(image.artist_links) }}
            {% endif %}
            {% if image.my_links %}
                <h4>My links</h4>
                {{ linkbox(image.my_links) }}
            {% endif %}
        </div>
    </div>
{% endblock %}